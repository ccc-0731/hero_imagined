{% extends 'base.html' %}
{% block content %}
  <section class="builder-section" data-raw-prompt="{{ raw_prompt }}">
    <h2 class="gradient-title">Design Your Hero</h2>
    <p class="subtitle gradient-subtitle">Setting: <strong id="detected-topic">{{ detected.topic }}</strong></p>
    
    <div class="columns">
      <div class="column">
        <h3>Character Designer</h3>
        <form id="character-form">
          <div id="character-questions"></div>
        </form>
        
        <div class="output-panel">
          <h4>Generated Character Profile</h4>
          <pre id="character-output" class="output"></pre>
        </div>
      </div>

      <div class="column">
        <h3>World Builder</h3>
        <form id="world-form">
          <div id="world-questions"></div>
        </form>
        
        <div class="output-panel">
          <h4>Generated World Description</h4>
          <pre id="world-output" class="output"></pre>
        </div>
      </div>
    </div>

    <div class="button-group">
      <button id="gen-character">Generate Character</button>
      <button id="gen-world">Generate World</button>
      <button id="done-button" disabled class="done-btn">Done</button>
    </div>

    <div id="final-section" style="margin-top:30px; display:none">
      <h2 class="gradient-title">Your Story</h2>
      
      <!-- Progress Checklist -->
      <div id="progress-checklist" style="margin-bottom: 30px; padding: 15px; background: #f8f8f8; border-radius: 8px; display: none;">
        <h4 style="margin-top: 0; color: #333;">Creating Your Story...</h4>
        <div id="checklist-items"></div>
      </div>
      
      <article id="story-text" class="story"></article>
      <div id="images" class="images"></div>
      <h3 class="gradient-title">Real-life Inspiration</h3>
      <div id="analogy" class="output"></div>
      
      <!-- Download PDF Button -->
      <div style="margin-top: 30px; text-align: center;">
        <button id="download-pdf-btn" style="padding: 12px 24px; font-size: 16px; background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%); color: white; border: none; border-radius: 6px; cursor: pointer; display: none;">
          ðŸ“¥ Download Story as PDF
        </button>
      </div>
    </div>

    <div id="audio-section" style="margin-top:30px; display:none">
      <h2 class="gradient-title">Your Adventure Soundtrack</h2>
      <div id="audio-player"></div>
    </div>
  </section>
{% endblock %}


